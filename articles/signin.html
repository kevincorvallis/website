<!DOCTYPE html>
<html>
  <head>
    <script src="https://accounts.google.com/gsi/client" onload="initClient()" async defer></script>
  </head>
  <body>
    <script>
      var client;
      function initClient() {
        client = google.accounts.id.init({
            client_id: '801961296119-s4u306t6rggorr92gtq8pc54uuhalirq.apps.googleusercontent.com',
            callback: (response) => {
              var code_receiver_uri = 'https://0a65j03yja.execute-api.us-west-2.amazonaws.com/prod/authentication';
              // Send id_token to your backend platform
              const xhr = new XMLHttpRequest();
              xhr.open('POST', code_receiver_uri, true);
              xhr.setRequestHeader('Content-Type', 'application/json');
              xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
              xhr.onload = function() {
                console.log('Signed in as: ' + xhr.responseText);
              };
              xhr.send(JSON.stringify({ credential: response.credential }));
            },
            cancel_on_tap_outside: false,
        });
      }
      function signIn() {
        // Request user authentication
        client.signIn();
      }
    </script>
    <button onclick="signIn();">Sign in with Google</button>
  </body>
</html>
