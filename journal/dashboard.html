<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day by Day - Your Journal</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="dashboard.css">
  <!-- AWS Amplify loaded via ES modules in dashboard.js -->
</head>
<body>
  <div class="dashboard-container">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-content">
        <h1 id="welcome">Welcome back!</h1>
        <p id="personalizedMessage" class="personalized-message"></p>
      </div>
      <div class="header-actions">
        <div id="syncStatus"><span class="sync-indicator syncing">Syncing...</span></div>
        <button id="profileBtn" class="icon-btn" onclick="showProfile()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9C15 10.1 14.1 11 13 11V14H11V11C9.9 11 9 10.1 9 9V7.5L3 7V9C3 10.1 3.9 11 5 11V14H7V11C8.1 11 9 10.1 9 9V7.5L15 7.5V9C15 10.1 15.9 11 17 11V14H19V11C20.1 11 21 10.1 21 9Z" fill="currentColor"/>
          </svg>
        </button>
        <button onclick="signOutUser()" class="icon-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.59L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Quick Stats -->
    <div class="stats-container">
      <div class="stat-card">
        <h3 id="entryCount">0</h3>
        <p>Entries</p>
      </div>
      <div class="stat-card">
        <h3 id="streakCount">0</h3>
        <p>Day Streak</p>
      </div>
      <div class="stat-card">
        <h3 id="wordCount">0</h3>
        <p>Words Written</p>
      </div>
    </div>

    <!-- New Entry Form -->
    <div class="entry-form-container">
      <h2>What's on your mind today?</h2>
      <form id="entryForm">
        <input type="text" id="entryTitle" placeholder="Give your entry a title..." required>
        <textarea id="entryText" rows="8" placeholder="Write your thoughts, feelings, or experiences..." required></textarea>
        <div class="form-actions">
          <button type="submit" class="primary-btn">Save Entry</button>
          <button type="button" class="secondary-btn" onclick="clearForm()">Clear</button>
        </div>
      </form>
    </div>

    <!-- Journal Entries -->
    <div class="entries-container">
      <h2>Your Journal</h2>
      <div id="entries" class="entries-grid"></div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div id="profileModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Your Profile</h2>
        <button class="close-btn" onclick="hideProfile()">Ã—</button>
      </div>
      <div class="modal-body">
        <div id="profileContent"></div>
        <div class="modal-actions">
          <button onclick="editProfile()" class="primary-btn">Edit Profile</button>
          <button onclick="hideProfile()" class="secondary-btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="dashboard.js"></script>
</body>
</html>
